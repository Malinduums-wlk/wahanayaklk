{% load static ads_extras %}
<a href="{% url 'ads:detail' vehicle.id %}" class="vehicle-card text-decoration-none">
    <div class="image-container">
        {% if vehicle.images.first %}
        <img src="{{ vehicle.images.first.image.url }}" alt="{{ vehicle.make }} {{ vehicle.model }}">
        {% else %}
        <img src="{% static 'images/no-image.jpg' %}" alt="No image available">
        {% endif %}
        <div class="listing-date">{{ vehicle.created_at|date:'M d, Y' }}</div>
    </div>
    <div class="card-body">
        <div class="title-price">
            <div class="title-container">
                <h3 class="vehicle-title">{{ vehicle.make }} {{ vehicle.model }}</h3>
            </div>
            <div class="vehicle-price">Rs. {{ vehicle.price|floatformat:"0" }}</div>
        </div>
        <div class="card-divider"></div>
        <div class="vehicle-details">
            <div class="detail-item">
                <i class="fas fa-calendar-alt"></i>
                <span>{{ vehicle.registered|default:vehicle.year }}</span>
            </div>
            {% if vehicle.mileage %}
            <div class="detail-item">
                <i class="fas fa-road"></i>
                <span>{{ vehicle.mileage }} km</span>
            </div>
            {% endif %}
            <div class="detail-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>{{ vehicle.location }}</span>
            </div>
        </div>
    </div>
    {% if user.is_authenticated %}
    <div class="favorite-btn {% if vehicle|is_favorite:user %}active{% endif %}"
         data-vehicle-id="{{ vehicle.id }}" onclick="event.preventDefault(); event.stopPropagation(); toggleFavorite(this)">
        <i class="fas fa-heart"></i>
    </div>
    {% endif %}
</a> 